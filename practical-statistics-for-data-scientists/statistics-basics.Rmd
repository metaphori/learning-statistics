---
jupyter:
  jupytext:
    formats: ipynb,Rmd
    text_representation:
      extension: .Rmd
      format_name: rmarkdown
      format_version: '1.2'
      jupytext_version: 1.6.0
  kernelspec:
    display_name: Python 3
    language: python
    name: python3
---

# Practical Statistics for Data scientists

<https://github.com/gedeck/practical-statistics-for-data-scientists>

```{python pycharm={'is_executing': False, 'name': '#%%\n'}}
import pandas as pd
import math
import numpy as np
import matplotlib.pyplot as plt
from scipy.stats import trim_mean

print("Hello notebook")
```

<!-- #region pycharm={"name": "#%% md\n"} -->
State dataset
<!-- #endregion -->

```{python pycharm={'name': '#%%\n', 'is_executing': False}}
state = pd.read_csv('data/state.csv')

print(state.head())
```

<!-- #region pycharm={"name": "#%% md\n"} -->
Mean, trimmed mean, and median for population.
(Note that mean > trimmed mean > median)

Mean and median are built in in Pandas.
We use **`trim_mean`** from `scipy.stats`.
<!-- #endregion -->

```{python pycharm={'name': '#%%\n', 'is_executing': False}}
pop = state['Population']

pop

print(
    'Mean: ', state['Population'].mean(),
    '\nTrimmed mean: ', trim_mean(state['Population'], 0.1), # cuts 10% states (largest and smallest ones)
    '\nMedian: ', state['Population'].median()
    )
```

<!-- #region pycharm={"name": "#%% md\n"} -->
If we want to compute the average murder rate
for the country, we need to use a weighted mean or median to account for different
populations in the states.

**Weighted mean** is available in NumPy.
For **Weighted median**, we can use the package **`wquantiles`**
<!-- #endregion -->

```{python pycharm={'name': '#%%\n', 'is_executing': False}}
import wquantiles

murdrate_wmean = np.average(state['Murder.Rate'], weights=state['Population'])
murdrate_wmedian = wquantiles.median(state['Murder.Rate'], weights=state['Population'])
print('Weighted mean: ', murdrate_wmean, '\nWeighted median: ', murdrate_wmedian)
print('Cf. mean: ', state['Murder.Rate'].mean())
```
